# Generated by Django 6.0.2 on 2026-02-15 21:54

import django.core.validators
import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounts', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='MealTimeSlot',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Дата обновления')),
                ('title', models.CharField(choices=[('breakfast', 'Завтрак'), ('lunch', 'Обед'), ('dinner', 'Ужин'), ('snack', 'Перекус')], max_length=20, unique=True, verbose_name='Тип приема пищи')),
                ('start_hour', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(23)], verbose_name='Час начала (0-23)')),
                ('end_hour', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(23)], verbose_name='Час окончания (0-23)')),
            ],
            options={
                'verbose_name': 'Интервал приема пищи',
                'verbose_name_plural': 'Интервалы приема пищи',
                'ordering': ['start_hour'],
            },
        ),
        migrations.CreateModel(
            name='Meal',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Дата обновления')),
                ('name', models.CharField(blank=True, choices=[('breakfast', 'Завтрак'), ('lunch', 'Обед'), ('dinner', 'Ужин'), ('snack', 'Перекус')], help_text='Завтрак, Обед, Ужин, Перекус/другое', max_length=20, verbose_name='Тип приема пищи')),
                ('meal_date', models.DateField(help_text='Дата, когда был прием пищи', verbose_name='Дата приема пищи')),
                ('meal_time', models.TimeField(help_text='Время приема пищи', verbose_name='Время приема пищи')),
                ('portion_size', models.TextField(help_text='Текстовое описание размера порции', verbose_name='Размер порции')),
                ('description', models.CharField(blank=True, max_length=200, null=True, verbose_name='Описание')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meals', to='accounts.patientprofile', verbose_name='Пациент')),
            ],
            options={
                'verbose_name': 'Прием пищи',
                'verbose_name_plural': 'Приемы пищи',
                'ordering': ['-meal_date', '-meal_time'],
            },
        ),
        migrations.CreateModel(
            name='Dish',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Дата обновления')),
                ('name', models.CharField(max_length=200, verbose_name='Название продукта')),
                ('weight', models.PositiveIntegerField(help_text='Вес продукта в граммах', validators=[django.core.validators.MinValueValidator(1)], verbose_name='Вес (в граммах)')),
                ('calories', models.PositiveIntegerField(help_text='Количество калорий в указанном весе', validators=[django.core.validators.MinValueValidator(0)], verbose_name='Калории (ккал)')),
                ('protein', models.FloatField(help_text='Количество белков в указанном весе', validators=[django.core.validators.MinValueValidator(0.0)], verbose_name='Белки (г)')),
                ('fat', models.FloatField(help_text='Количество жиров в указанном весе', validators=[django.core.validators.MinValueValidator(0.0)], verbose_name='Жиры (г)')),
                ('carbohydrates', models.FloatField(help_text='Количество углеводов в указанном весе', validators=[django.core.validators.MinValueValidator(0.0)], verbose_name='Углеводы (г)')),
                ('score', models.FloatField(help_text='Оценка того, насколько продукт полезен для организма', validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)], verbose_name='Индекс «здорового питания»')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Описание продукта')),
                ('meal', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='components', to='food_diary.meal', verbose_name='Прием пищи')),
            ],
            options={
                'verbose_name': 'Продукт',
                'verbose_name_plural': 'Продукты',
            },
        ),
        migrations.AddIndex(
            model_name='meal',
            index=models.Index(fields=['patient', 'meal_date'], name='food_diary__patient_e97468_idx'),
        ),
    ]
